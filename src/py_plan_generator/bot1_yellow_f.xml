<?xml version='1.0' encoding='utf-8'?>
<root><BehaviorTree ID="BannerMission">
    <Sequence _successIf="not_now">
      <MySetBlackboard new_value="{not_now}" blackboard_value="{NOT_NOW}" blackboard_key="NOT_NOW" />
      <BannerChecker remap_banner_place="{remap_banner_place}" banner_place="{BANNER_PLACE}" />
      <Parallel failure_count="1" success_count="2">
        <ForceSuccess>
          <Timeout msec="100">
            <FirmwareMission mission_status="{x}" mission_type="81" _description="lift the front grabber" />
          </Timeout>
        </ForceSuccess>
        <Switch2 case_1="0" case_2="1" variable="{BANNER_PLACE}">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_y_slow_precise_linearBoost" shift="0" offset="-0.1" base="2.75, 0.3, 0" />
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_y_slow_precise_linearBoost" shift="0" offset="-0.1" base="1.25, 0.3, 0" />
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_y_slow_precise_linearBoost" shift="0" offset="-0.1" base="0.75, 0.3, 0" />
        </Switch2>
      </Parallel>
      <ForceSuccess>
        <Timeout msec="100">
          <FirmwareMission mission_status="{x}" mission_type="82" _description="lift the front grabber" />
        </Timeout>
      </ForceSuccess>
      <ForceSuccess>
        <Timeout msec="100">
          <FirmwareMission mission_status="{x}" mission_type="80" _description="lift the front grabber" />
        </Timeout>
      </ForceSuccess>
      <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="dock_y_slow_precise_linearBoost" final_pose="{PrevGoal}" isPureDocking="1" offset="0.1" retry="100" shift="0" sleep="100" timeout="6000" _autoremap="true" />
      <MissionSuccess levels="0" base_index="-2" />
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="DockingSubTree">
    <Sequence>
      <MySetBlackboard new_value="{Timeout}" blackboard_value="false" blackboard_key="Timeout" />
      <RetryUntilSuccessful num_attempts="{retry}" _failureIf="Timeout">
        <Fallback>
          <Parallel failure_count="1" success_count="1">
            <Docking final_pose="{final_pose}" isPureDocking="{isPureDocking}" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" _description="step back" />
            <Sequence>
              <Sleep msec="{timeout}" />
              <MySetBlackboard new_value="{Timeout}" blackboard_value="true" blackboard_key="Timeout" />
            </Sequence>
          </Parallel>
          <ForceFailure _successIf="Timeout">
            <Sleep msec="{sleep}" />
          </ForceFailure>
        </Fallback>
      </RetryUntilSuccessful>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="FirmwareTest">
    <Switch5 case_1="1" case_2="2" case_3="3" case_4="4" case_5="5" variable="5">
      <Sequence>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="22" _description="backward stretch out" />
          </Timeout>
        </ForceSuccess>
        <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="-0.2" mission_type="back" dock_type="dock_x_slow_precise_linearBoost" base_index="8">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
        </MaterialChecker>
        <SubTree ID="OneLevelBot1new" _autoremap="true" />
      </Sequence>
      <Sequence>
        <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="-0.2" mission_type="front" dock_type="dock_x_slow_precise_linearBoost" base_index="7">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
        </MaterialChecker>
        <SubTree ID="TwoLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.105, 0.065" shift="0.11" index="7" _autoremap="true" />
      </Sequence>
      <Sequence>
        <MissionChecker level="{level}" remap_base="{base}" mission_type="back" base_index="15">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_x_slow_precise_linearBoost" shift="0" offset="-0.1" base="{base}" />
        </MissionChecker>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="20" _description="put back material" />
          </Timeout>
        </ForceSuccess>
        <MissionSuccess levels="1" base_index="15" />
      </Sequence>
      <Sequence>
        <MissionChecker level="{level}" remap_base="{base}" mission_type="front" base_index="15">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_x_slow_precise_linearBoost" shift="0" offset="-0.1" base="{base}" />
        </MissionChecker>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="35" _description="put back material" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="30" _description="put back material" />
          </Timeout>
        </ForceSuccess>
        <Docking final_pose="{PrevGoal}" isPureDocking="1" dock_type="dock_x_slow_precise_linearBoost" shift="0" offset="0.1" base="{PrevGoal}" />
        <MissionSuccess levels="2" base_index="15" />
      </Sequence>
      <Sequence>
        <SetBlackboard value="0" output_key="hasCompleteMaterial" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="22" _description="take back material" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="21" _description="take back material" />
          </Timeout>
        </ForceSuccess>
        <SetBlackboard value="2" output_key="back_materials" />
        <MissionChecker level="{level}" remap_base="{base}" mission_type="back" base_index="15">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_x_slow_precise_linearBoost" shift="0" offset="-0.1" base="{base}" />
        </MissionChecker>
        <SubTree ID="ThreeLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.095, 0.065" shift="0" index="15" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
      </Sequence>
      <Sequence>
        <SubTree ID="BannerMission" BANNER_PLACE="0" _autoremap="true" />
      </Sequence>
    </Switch5>
  </BehaviorTree>

  <BehaviorTree ID="FuncTest">
    <Sequence>
      <ForceSuccess>
        <Timeout msec="6000">
          <FirmwareMission mission_status="{x}" mission_type="22" _description="put back material" />
        </Timeout>
      </ForceSuccess>
      <ForceSuccess>
        <Timeout msec="6000">
          <FirmwareMission mission_status="{x}" mission_type="21" _description="put back material" />
        </Timeout>
      </ForceSuccess>
      <ForceSuccess>
        <Timeout msec="6000">
          <FirmwareMission mission_status="{x}" mission_type="" _description="put back material" />
        </Timeout>
      </ForceSuccess>
      <ForceSuccess>
        <Timeout msec="6000">
          <FirmwareMission mission_status="{x}" mission_type="21" _description="put back material" />
        </Timeout>
      </ForceSuccess>
      <ForceSuccess>
        <Timeout msec="100">
          <FirmwareMission mission_status="{x}" mission_type="20" _description="put back material" />
        </Timeout>
      </ForceSuccess>
      <ForceSuccess>
        <Timeout msec="6000">
          <FirmwareMission mission_status="{x}" mission_type="32" _description="put back material" />
        </Timeout>
      </ForceSuccess>
      <Sleep msec="50000" />
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="MainTree">
    <Sequence>
      <Parallel failure_count="2" success_count="1">
        <Sequence>
          <Sequence>
            <BTStarter result="{STATUS}" />
            <CamReceiver />
          </Sequence>
          <SetBlackboard value="0" output_key="hasCompleteMaterial" />
          <ForceSuccess>
            <SubTree ID="MissionPoint1" NOT_NOW="true" _autoremap="true" />
          </ForceSuccess>
          <ForceSuccess>
            <SubTree ID="MissionPoint2" NOT_NOW="true" _autoremap="true" />
          </ForceSuccess>
          <ForceSuccess>
            <SubTree ID="MissionPoint3new" NOT_NOW="true" _autoremap="true" />
          </ForceSuccess>
        </Sequence>
        <Sequence>
          <Sleep msec="97000" />
          <ForceSuccess>
            <RetryUntilSuccessful num_attempts="40">
              <Sequence>
                <Sleep msec="1000" />
              </Sequence>
            </RetryUntilSuccessful>
          </ForceSuccess>
        </Sequence>
      </Parallel>
      <StopRobot />
      <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_y_slow_precise_linearBoost" shift="0" offset="0" base="0.35, 1.6, 0" />
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="MissionPoint1">
    <Sequence>
      <Parallel failure_count="1" success_count="2">
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="22" _description="backward stretch out" />
          </Timeout>
        </ForceSuccess>
        <Fallback>
          <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="-0.2" mission_type="back" dock_type="slow_loose_linearBoost" base_index="1">
            <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
          </MaterialChecker>
          <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="-0.2" mission_type="back" dock_type="slow_loose_linearBoost" base_index="-1">
            <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
          </MaterialChecker>
          <MySetBlackboard new_value="{last_mission_failed}" blackboard_value="true" blackboard_key="last_mission_failed" />
        </Fallback>
      </Parallel>
      <MissionSuccess levels="1" base_index="{index}" _skipIf="last_mission_failed" />
      <Parallel failure_count="1" success_count="2">
        <SubTree ID="OneLevelBot1new" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
        <Delay delay_msec="700">
          <Fallback>
            <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0.045" offset="-0.2" mission_type="front" dock_type="slow_loose_linearBoost" base_index="2">
              <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
            </MaterialChecker>
            <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="0" mission_type="front" dock_type="slow_loose_linearBoost" base_index="-1">
              <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
            </MaterialChecker>
            <MySetBlackboard new_value="{last_mission_failed}" blackboard_value="true" blackboard_key="last_mission_failed" />
          </Fallback>
        </Delay>
      </Parallel>
      <SubTree ID="TwoLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.105, 0.065" shift="0.10" index="{index}" _skipIf="last_mission_failed" _autoremap="true" />
      <ForceSuccess>
        <SubTree ID="BannerMission" BANNER_PLACE="0" NOT_NOW="{NOT_NOW}" _autoremap="true" />
      </ForceSuccess>
      <Sequence>
        <ForceSuccess>
          <RetryUntilSuccessful num_attempts="10">
            <Fallback>
              <MissionChecker level="{level}" remap_base="{base}" mission_type="back" base_index="11">
                <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_x_slow_precise" shift="0" offset="0.1" base="{base}" />
              </MissionChecker>
              <ForceFailure>
                <Sleep msec="500" />
              </ForceFailure>
            </Fallback>
          </RetryUntilSuccessful>
        </ForceSuccess>
        <Switch2 case_1="1" case_2="2" variable="{level}">
          <SubTree ID="PlaceOneLevel" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
          <Sequence>
            <Rotation final_pose="{PrevGoal}" degree="180" base="{PrevGoal}" />
            <SubTree ID="PlaceTwoLevels" _autoremap="true" />
          </Sequence>
          <SubTree ID="ThreeLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.095, 0.065" shift="0" index="11" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
        </Switch2>
      </Sequence>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="MissionPoint2">
    <Sequence>
      <Fallback>
        <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0.045" offset="0.2" mission_type="front" dock_type="slow_loose_linearBoost" base_index="3">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
        </MaterialChecker>
        <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="-0.2" mission_type="front" dock_type="slow_loose_linearBoost" base_index="-1">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
        </MaterialChecker>
        <MySetBlackboard new_value="{last_mission_failed}" blackboard_value="true" blackboard_key="last_mission_failed" />
      </Fallback>
      <SubTree ID="TwoLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.105, 0.065" shift="0.11" index="{index}" _skipIf="last_mission_failed" _autoremap="true" />
      <ForceSuccess>
        <SubTree ID="BannerMission" BANNER_PLACE="0" NOT_NOW="{NOT_NOW}" _autoremap="true" />
      </ForceSuccess>
      <Sequence>
        <ForceSuccess>
          <MissionChecker level="{level}" remap_base="{base}" mission_type="back" base_index="11">
            <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_x_slow_precise" shift="0" offset="0.1" base="{base}" />
          </MissionChecker>
        </ForceSuccess>
        <Switch2 case_1="1" case_2="2" variable="{level}">
          <SubTree ID="PlaceOneLevel" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
          <Sequence>
            <Rotation final_pose="{PrevGoal}" degree="180" base="{PrevGoal}" />
            <SubTree ID="PlaceTwoLevels" _autoremap="true" />
          </Sequence>
          <SubTree ID="ThreeLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.095, 0.065" shift="0" index="11" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
        </Switch2>
      </Sequence>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="MissionPoint3">
    <Sequence>
      <Fallback>
        <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="-0.2" mission_type="back" dock_type="slow_loose_linearBoost" base_index="7">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
        </MaterialChecker>
        <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="0" mission_type="back" dock_type="slow_loose_linearBoost" base_index="-1">
          <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
        </MaterialChecker>
        <MySetBlackboard new_value="{last_mission_failed}" blackboard_value="true" blackboard_key="last_mission_failed" />
      </Fallback>
      <MissionSuccess levels="1" base_index="{index}" _skipIf="last_mission_failed" />
      <Parallel failure_count="1" success_count="2">
        <SubTree ID="OneLevelBot1new" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
        <Delay delay_msec="1500">
          <Fallback>
            <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="-0.2" mission_type="front" dock_type="slow_loose_linearBoost" base_index="4">
              <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
            </MaterialChecker>
            <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="0" mission_type="front" dock_type="slow_loose_linearBoost" base_index="-1">
              <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
            </MaterialChecker>
            <MySetBlackboard new_value="{last_mission_failed}" blackboard_value="true" blackboard_key="last_mission_failed" />
          </Fallback>
        </Delay>
      </Parallel>
      <SubTree ID="TwoLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.105, 0.065" shift="0.11" index="{index}" _skipIf="last_mission_failed" _autoremap="true" />
      <Sequence>
        <ForceSuccess>
          <RetryUntilSuccessful num_attempts="10">
            <Fallback>
              <MissionChecker level="{level}" remap_base="{base}" mission_type="back" base_index="18">
                <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_y_slow_precise_linearBoost" shift="0" offset="-0.1" base="{base}" />
              </MissionChecker>
              <ForceFailure>
                <Sleep msec="500" />
              </ForceFailure>
            </Fallback>
          </RetryUntilSuccessful>
        </ForceSuccess>
        <Switch2 case_1="1" case_2="2" variable="{level}">
          <SubTree ID="PlaceOneLevel" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
          <Sequence>
            <Rotation final_pose="{PrevGoal}" degree="180" base="{PrevGoal}" />
            <SubTree ID="PlaceTwoLevels" _autoremap="true" />
          </Sequence>
          <SubTree ID="ThreeLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.095, 0.065" shift="0" index="18" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
        </Switch2>
      </Sequence>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="MissionPoint3new">
    <Sequence>
      <Parallel failure_count="1" success_count="-1">
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="22" _description="backward stretch out" />
          </Timeout>
        </ForceSuccess>
        <Fallback>
          <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="-0.2" mission_type="back" dock_type="slow_loose_linearBoost" base_index="4">
            <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
          </MaterialChecker>
          <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="0" mission_type="back" dock_type="slow_loose_linearBoost" base_index="-1">
            <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
          </MaterialChecker>
          <MySetBlackboard new_value="{last_mission_failed}" blackboard_value="true" blackboard_key="last_mission_failed" />
        </Fallback>
      </Parallel>
      <MissionSuccess levels="1" base_index="{index}" _skipIf="last_mission_failed" />
      <SubTree ID="OneLevelBot1new" hasCompleteMaterial="{hasCompleteMaterial}" _successIf="last_mission_failed" _autoremap="true" />
      <ForceSuccess>
        <SubTree ID="BannerMission" BANNER_PLACE="0" NOT_NOW="{NOT_NOW}" _autoremap="true" />
      </ForceSuccess>
      <Sequence>
        <ForceSuccess>
          <RetryUntilSuccessful num_attempts="10">
            <Fallback>
              <MissionChecker level="{level}" remap_base="{base}" mission_type="back" base_index="11">
                <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_x_slow_precise" shift="0" offset="0.1" base="{base}" />
              </MissionChecker>
              <ForceFailure>
                <Sleep msec="500" />
              </ForceFailure>
            </Fallback>
          </RetryUntilSuccessful>
        </ForceSuccess>
        <Switch2 case_1="1" case_2="2" variable="{level}">
          <SubTree ID="PlaceOneLevel" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
          <Sequence>
            <Rotation final_pose="{PrevGoal}" degree="180" base="{PrevGoal}" />
            <SubTree ID="PlaceTwoLevels" _autoremap="true" />
          </Sequence>
          <SubTree ID="ThreeLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.095, 0.065" hasCompleteMaterial="{hasCompleteMaterial}" index="11" shift="0" _autoremap="true" />
        </Switch2>
        <ForceSuccess>
          <RetryUntilSuccessful num_attempts="10">
            <Fallback>
              <MissionChecker level="{level}" remap_base="{base}" mission_type="back" base_index="12">
                <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_y_slow_precise" shift="0" offset="-0.1" base="{base}" />
              </MissionChecker>
              <ForceFailure>
                <Sleep msec="500" />
              </ForceFailure>
            </Fallback>
          </RetryUntilSuccessful>
        </ForceSuccess>
        <Switch2 case_1="1" case_2="2" variable="{level}">
          <SubTree ID="PlaceOneLevel" hasCompleteMaterial="{hasCompleteMaterial}" _autoremap="true" />
          <Sequence>
            <Rotation final_pose="{PrevGoal}" degree="180" base="{PrevGoal}" />
            <SubTree ID="PlaceTwoLevels" _autoremap="true" />
          </Sequence>
          <SubTree ID="ThreeLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.095, 0.065" hasCompleteMaterial="{hasCompleteMaterial}" index="12" shift="0" _autoremap="true" />
        </Switch2>
      </Sequence>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="NavTest">
    <Sequence>
      <LoopDouble if_empty="SUCCESS" value="{index_double}" queue="5, 6, 7, 8, 9">
        <Sequence>
          <Double2Int int="{index}" double="{index_double}" />
          <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="0" mission_type="back" dock_type="slow_loose_linearBoost" base_index="{index}">
            <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
          </MaterialChecker>
          <ForceSuccess>
            <Timeout msec="6000">
              <FirmwareMission mission_status="{x}" mission_type="21" _description="take the raw material" />
            </Timeout>
          </ForceSuccess>
          <Rotation final_pose="{PrevGoal}" degree="3" base="{PrevGoal}" />
          <Rotation final_pose="{PrevGoal}" degree="-3" base="{PrevGoal}" />
          <ForceSuccess>
            <Timeout msec="6000">
              <FirmwareMission mission_status="{x}" mission_type="20" _description="take the raw material" />
            </Timeout>
          </ForceSuccess>
          <ForceSuccess>
            <Timeout msec="6000">
              <FirmwareMission mission_status="{x}" mission_type="24" _description="take the raw material" />
            </Timeout>
          </ForceSuccess>
          <Sleep msec="200" />
        </Sequence>
      </LoopDouble>
      <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_x_slow_precise_linearBoost" shift="0" offset="0" base="1.5, 1.0, 0" _description="step back to release" />
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="NavTest1">
    <Sequence>
      <SetBlackboard value="0" output_key="dontDoMission" />
      <SetBlackboard value="1" output_key="dontLift" />
      <LoopInt32 value="{index}" if_empty="SUCCESS" queue="0 1 2 3 4 5 6 7 8 9">
        <Sequence>
          <MaterialChecker remap_offset="{offset}" remap_shift="{shift}" remap_dock_type="{dock_type}" remap_base="{base}" remap_index="{index}" shift="0" offset="0" mission_type="front" dock_type="slow_loose_linearBoost" base_index="{index}">
            <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="{dock_type}" shift="{shift}" offset="{offset}" base="{base}" />
          </MaterialChecker>
          <Sequence _successIf="dontLift">
            <ForceSuccess>
              <Timeout msec="6000">
                <FirmwareMission mission_status="{x}" mission_type="21" _description="take the raw material" />
              </Timeout>
            </ForceSuccess>
            <ForceSuccess>
              <Timeout msec="6000">
                <FirmwareMission mission_status="{x}" mission_type="31" _description="take the raw material" />
              </Timeout>
            </ForceSuccess>
            <ForceSuccess>
              <Timeout msec="6000">
                <FirmwareMission mission_status="{x}" mission_type="30" _description="take the raw material" />
              </Timeout>
            </ForceSuccess>
            <ForceSuccess>
              <Timeout msec="6000">
                <FirmwareMission mission_status="{x}" mission_type="20" _description="take the raw material" />
              </Timeout>
            </ForceSuccess>
          </Sequence>
          <SubTree ID="TwoLevelsBot1new" back="0.2, 0.1, 0.05" forward="0.15, 0.105, 0.065" index="{index}" shift="0.11" _successIf="dontDoMission" _autoremap="true" />
        </Sequence>
      </LoopInt32>
      <Docking final_pose="{PrevGoal}" isPureDocking="0" dock_type="dock_x_slow_precise_linearBoost" shift="0" offset="0" base="1.5, 1.0, 0" _description="step back to release" />
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="OneLevelBot1new">
    <Sequence>
      <ForceSuccess>
        <Timeout msec="4000">
          <FirmwareMission mission_status="{x}" mission_type="21" _description="back arm take raw material" />
        </Timeout>
      </ForceSuccess>
      <ForceSuccess>
        <Timeout msec="6000">
          <FirmwareMission mission_status="{x}" mission_type="32" _description="arm up" />
        </Timeout>
      </ForceSuccess>
      <SetBlackboard value="1" output_key="hasCompleteMaterial" />
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="PlaceOneLevel">
    <Switch2 case_1="1" case_2="0" variable="{hasCompleteMaterial}">
      <Sequence>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="20" _description="back arm release 1 level" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="100">
            <FirmwareMission mission_status="{x}" mission_type="25" _description="close back side arm" />
          </Timeout>
        </ForceSuccess>
        <SetBlackboard value="0" output_key="hasCompleteMaterial" />
      </Sequence>
      <Sequence>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="24" _description="back arm release 1 level" />
          </Timeout>
        </ForceSuccess>
        <Sleep msec="200" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="23" _description="back arm release 1 level" />
          </Timeout>
        </ForceSuccess>
        <SetBlackboard value="0" output_key="hasCompleteMaterial" />
      </Sequence>
      <AlwaysFailure />
    </Switch2>
  </BehaviorTree>

  <BehaviorTree ID="PlaceTwoLevels">
    <Parallel failure_count="1" success_count="2">
      <ForceSuccess>
        <Timeout msec="6000">
          <FirmwareMission mission_status="{x}" mission_type="35" _description="shrink little arm" />
        </Timeout>
      </ForceSuccess>
      <ForceSuccess>
        <Timeout msec="6000">
          <FirmwareMission mission_status="{x}" mission_type="30" _description="arm down" />
        </Timeout>
      </ForceSuccess>
    </Parallel>
  </BehaviorTree>

  <BehaviorTree ID="ThreeLevelsBot1new">
    <Fallback>
      <Sequence>
        <MissionStart BACK_IN="{back}" FORWARD_IN="{forward}" SHIFT_IN="{shift}" INDEX_IN="{index}" BACK_L="{BACK_L}" BACK_M="{BACK_M}" BACK_S="{BACK_S}" FORWARD_L="{FORWARD_L}" FORWARD_M="{FORWARD_M}" FORWARD_S="{FORWARD_S}" SHIFT="{SHIFT}" DOCK_DIR="{DOCK_DIR}" />
        <Switch2 case_1="1" case_2="0" variable="{hasCompleteMaterial}">
          <Sequence>
            <ForceSuccess>
              <Timeout msec="6000">
                <FirmwareMission mission_status="{x}" mission_type="20" _description="back arm release 1 level" />
              </Timeout>
            </ForceSuccess>
            <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{BACK_L}" retry="100" shift="0" sleep="100" timeout="6000" _autoremap="true" />
            <ForceSuccess>
              <Timeout msec="100">
                <FirmwareMission mission_status="{x}" mission_type="25" _description="close back side arm" />
              </Timeout>
            </ForceSuccess>
            <SetBlackboard value="0" output_key="hasCompleteMaterial" />
          </Sequence>
          <Sequence>
            <ForceSuccess>
              <Timeout msec="6000">
                <FirmwareMission mission_status="{x}" mission_type="24" _description="back arm release 1 level" />
              </Timeout>
            </ForceSuccess>
            <Sleep msec="200" />
            <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{BACK_L}" retry="100" shift="0" sleep="100" timeout="6000" _autoremap="true" />
            <ForceSuccess>
              <Timeout msec="6000">
                <FirmwareMission mission_status="{x}" mission_type="23" _description="back arm release 1 level" />
              </Timeout>
            </ForceSuccess>
            <SetBlackboard value="0" output_key="hasCompleteMaterial" />
          </Sequence>
          <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{BACK_L}" retry="100" shift="0" sleep="100" timeout="2000" _autoremap="true" />
        </Switch2>
        <Rotation final_pose="{PrevGoal}" degree="180" base="{PrevGoal}" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="91" _description="enable back magnet " />
          </Timeout>
        </ForceSuccess>
        <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{FORWARD_M}" retry="100" shift="0" sleep="100" timeout="2700" _autoremap="true" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="35" _description="shrink little arm" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="31" _description="arm to 1 level high" />
          </Timeout>
        </ForceSuccess>
        <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{FORWARD_M}" retry="100" shift="0" sleep="100" timeout="2700" _autoremap="true" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="33" _description="arm down a little" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="10" _description="front place 2 level" />
          </Timeout>
        </ForceSuccess>
        <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{BACK_S}" retry="100" shift="0" sleep="100" timeout="6000" _autoremap="true" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="90" _description="enable front magnet " />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="32" _description="arm up" />
          </Timeout>
        </ForceSuccess>
        <MissionSuccess levels="2" base_index="{index}" />
      </Sequence>
      <MySetBlackboard new_value="{last_mission_failed}" blackboard_value="true" blackboard_key="last_mission_failed" />
      <ForceFailure>
        <MissionFailure failed_levels="{a}" success_levels="{b}" robot_type="1" step_results="5" />
      </ForceFailure>
    </Fallback>
  </BehaviorTree>

  <BehaviorTree ID="TwoLevelsBot1new">
    <Fallback>
      <Sequence>
        <MissionStart BACK_IN="{back}" FORWARD_IN="{forward}" SHIFT_IN="{shift}" INDEX_IN="{index}" BACK_L="{BACK_L}" BACK_M="{BACK_M}" BACK_S="{BACK_S}" FORWARD_L="{FORWARD_L}" FORWARD_M="{FORWARD_M}" FORWARD_S="{FORWARD_S}" SHIFT="{SHIFT}" DOCK_DIR="{DOCK_DIR}" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="71" _description="take board" />
          </Timeout>
        </ForceSuccess>
        <SubTree ID="DockingSubTree" retry="100" timeout="6000" sleep="100" base="{PrevGoal}" offset="{BACK_S}" shift="0" isPureDocking="1" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" _autoremap="true" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="30" _description="arm down" />
          </Timeout>
        </ForceSuccess>
        <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{FORWARD_S}" retry="100" shift="0" sleep="100" timeout="2700" _autoremap="true" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="11" _description="front take 1 level" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="32" _description="arm up" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="70" _description="place board" />
          </Timeout>
        </ForceSuccess>
        <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="0" offset="0" retry="100" shift="{SHIFT}" sleep="100" timeout="2700" _autoremap="true" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="31" _description="arm to one level height" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="33" _description="arm down a little" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="10" _description="front place 1 level" />
          </Timeout>
        </ForceSuccess>
        <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{BACK_M}" retry="100" shift="0" sleep="100" timeout="6000" _autoremap="true" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="90" _description="enable front magnet " />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="30" _description="arm down" />
          </Timeout>
        </ForceSuccess>
        <SubTree ID="DockingSubTree" base="{PrevGoal}" dock_type="{DOCK_DIR}" final_pose="{PrevGoal}" isPureDocking="1" offset="{FORWARD_M}" retry="100" shift="0" sleep="100" timeout="2500" _autoremap="true" />
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="11" _description="front take 2 levels" />
          </Timeout>
        </ForceSuccess>
        <ForceSuccess>
          <Timeout msec="6000">
            <FirmwareMission mission_status="{x}" mission_type="34" _description="smd strenght" />
          </Timeout>
        </ForceSuccess>
        <MissionSuccess levels="2" base_index="{index}" />
      </Sequence>
      <MySetBlackboard new_value="{last_mission_failed}" blackboard_value="true" blackboard_key="last_mission_failed" />
      <ForceFailure>
        <MissionFailure failed_levels="{a}" success_levels="{b}" robot_type="1" step_results="4" />
      </ForceFailure>
    </Fallback>
  </BehaviorTree>

  
  <TreeNodesModel>
    <Action ID="BTStarter">
      <output_port name="result" type="int" />
    </Action>
    <Action ID="BannerChecker">
      <output_port name="remap_banner_place" type="int" />
      <input_port name="banner_place" type="int" />
    </Action>
    <Action ID="CamReceiver" />
    <Action ID="Docking">
      <output_port name="final_pose" type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;" />
      <input_port name="isPureDocking" type="bool" />
      <input_port name="dock_type" type="std::string" />
      <input_port name="shift" type="double" />
      <input_port name="offset" type="double" />
      <input_port name="base" type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;" />
    </Action>
    <Action ID="Double2Int">
      <output_port name="int" type="int" />
      <input_port name="double" type="double" />
    </Action>
    <Action ID="FirmwareMission">
      <output_port name="mission_status" type="int" />
      <input_port name="mission_type" type="int" />
    </Action>
    <Decorator ID="LoopInt32">
      <output_port name="value" type="int" />
      <input_port name="if_empty" type="BT::NodeStatus" />
      <input_port name="queue" type="std::deque&lt;int, std::allocator&lt;int&gt; &gt;" />
    </Decorator>
    <Decorator ID="MaterialChecker">
      <output_port name="remap_offset" type="double" />
      <output_port name="remap_shift" type="double" />
      <output_port name="remap_dock_type" type="std::string" />
      <output_port name="remap_base" type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;" />
      <output_port name="remap_index" type="int" />
      <input_port name="shift" type="double" />
      <input_port name="offset" type="double" />
      <input_port name="mission_type" type="std::string" />
      <input_port name="dock_type" type="std::string" />
      <input_port name="base_index" type="int" />
    </Decorator>
    <Decorator ID="MissionChecker">
      <output_port name="level" type="int" />
      <output_port name="remap_base" type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;" />
      <input_port name="mission_type" type="std::string" />
      <input_port name="base_index" type="int" />
    </Decorator>
    <Action ID="MissionFailure">
      <output_port name="failed_levels" type="int" />
      <output_port name="success_levels" type="int" />
      <input_port name="robot_type" type="bool" />
      <input_port name="step_results" type="std::deque&lt;int, std::allocator&lt;int&gt; &gt;" />
    </Action>
    <Action ID="MissionStart" editable="true">
      <input_port name="BACK_IN" />
      <input_port name="FORWARD_IN" />
      <input_port name="SHIFT_IN" />
      <input_port name="INDEX_IN" />
      <output_port name="BACK_L" />
      <output_port name="BACK_M" />
      <output_port name="BACK_S" />
      <output_port name="FORWARD_L" />
      <output_port name="FORWARD_M" />
      <output_port name="FORWARD_S" />
      <output_port name="SHIFT" />
      <output_port name="DOCK_DIR" />
    </Action>
    <Action ID="MissionSuccess">
      <input_port name="levels" type="int" />
      <input_port name="base_index" type="int" />
    </Action>
    <Action ID="MySetBlackboard">
      <output_port name="new_value" type="bool" />
      <input_port name="blackboard_value" type="bool" />
      <input_port name="blackboard_key" type="std::string" />
    </Action>
    <Action ID="Rotation">
      <output_port name="final_pose" type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;" />
      <input_port name="degree" type="double" />
      <input_port name="base" type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;" />
    </Action>
    <Action ID="StopRobot" />
  </TreeNodesModel>

</root>